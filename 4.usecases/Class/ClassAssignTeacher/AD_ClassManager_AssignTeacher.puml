@startuml AD_ClassManager_AssignTeacher
!pragma layout smetana
title Activity Diagram: Phân công giảng viên vào lớp học (Popup)

start
:Truy cập từ danh sách lớp học\n(btn "Phân công giảng viên");
:Hiển thị popup phân công giảng viên\n(**SCR_AssignTeacher**);

if (Có thực hiện tìm kiếm?) then (Có)
  :Nhập điều kiện tìm kiếm;
  :Hiển thị danh sách giảng viên theo điều kiện;
else (Không)
  :Hiển thị danh sách giảng viên mặc định;
endif

:Chọn 1 hoặc nhiều giảng viên;

:Chọn thao tác;
switch (Thao tác?)
  case (Lưu)
    :Kiểm tra trùng phân công / trạng thái GV;
    if (Hợp lệ & không trùng?) then (Đúng)
      :Ghi nhận phân công giảng viên vào lớp;
      if (Ghi thành công?) then (Có)
        :Thông báo "Phân công giảng viên thành công";
        :Đóng popup phân công giảng viên;
      else (Không)
        :Thông báo lỗi hệ thống;
        :Ở lại popup\n(**SCR_AssignTeacher**);
      endif
    else (Trùng/không hợp lệ)
      :Thông báo "giảng viên đã được phân công vào lớp học khác hoặc không hợp lệ";
      :Ở lại popup\n(**SCR_AssignTeacher**);
    endif
  case (Đóng)
    :Đóng popup;
    :Quay lại danh sách lớp học\n(**SCR_ClassManager**);
endswitch

stop
@enduml
