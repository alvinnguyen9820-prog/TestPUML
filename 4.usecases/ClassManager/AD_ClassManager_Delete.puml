@startuml AD_ClassManager_Delete
!pragma layout smetana
title Activity Diagram: Xóa lớp học (Popup)

start
:Truy cập chức năng "Xóa lớp học";

if (Có quyền truy cập?) then (Có)
  :Hiển thị popup xác nhận xóa\n(**SCR_ClassDelete**);

  switch (Xác nhận xóa?)
    case (Đồng ý)
      :Kiểm tra điều kiện/xung đột xóa\n(đang phân công GV/SV, đã khóa...);
        if (Đủ điều kiện xóa?) then (Đủ)
          :Thực hiện xóa lớp học;
          if (Xóa thành công?) then (Có)
            :Thông báo "Xóa lớp học thành công";
            :Đóng popup;
            :Chuyển hướng về danh sách\n(**SCR_ClassManager**);
          else (Không)
            :Thông báo lỗi hệ thống;
            :Ở lại popup\n(**SCR_ClassDelete**);
          endif
        else (Không)
          :Thông báo "Không thể xóa do đang có phân công/đăng ký";
          :Ở lại popup\n(**SCR_ClassDelete**);
        endif
    case (Đóng)
      :Xác nhận đóng?;
      if (Đồng ý?) then (Có)
        :Quay về danh sách lớp học\n(**SCR_ClassManager**);
      else (Không)
        :Ở lại màn hình\n(**SCR_ClassDelete**);
      endif
  endswitch

else (Không)
  :Thông báo không có quyền truy cập;
  :Đóng popup;
  :Chuyển hướng đến trang chính;
endif
stop
@enduml
