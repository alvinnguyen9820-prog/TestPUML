@startuml AD_ClassManager_AssignTeacher
!pragma layout smetana
title Activity Diagram: Phân công giảng viên vào lớp học (Popup)

start
:Truy cập từ danh sách lớp học\n(btn "Phân công giảng viên");

if (Có quyền truy cập?) then (Có)
  :Hiển thị popup phân công giảng viên\n(**SCR_AssignTeacher**);

    :Chọn giảng viên (1 hoặc nhiều);
    :Nhập điều kiện tìm kiếm (nếu cần);

    switch (Thao tác?)
      case (Lưu)
        :Kiểm tra trùng phân công / trạng thái GV;
          if (Hợp lệ & không trùng?) then (Đúng)
            :Ghi nhận phân công giảng viên vào lớp;
              if (Ghi thành công?) then (Có)
                :Thông báo "Phân công giảng viên thành công";
                :Đóng popup;
                :Cập nhật/Chuyển về danh sách\n(**SCR_ClassManager**);
              else (Không)
                :Thông báo lỗi hệ thống;
                :Chuyển về danh sách\n(**SCR_ClassManager**);
              endif
          else (Trùng/không hợp lệ)
            :Thông báo "Giảng viên đã được phân công hoặc không hợp lệ";
            :Ở lại popup\n(**SCR_AssignTeacher**);
          endif

      case (Đóng)
        :Đóng popup;
        :Quay lại danh sách lớp học\n(**SCR_ClassManager**);
    endswitch

else (Không)
  :Thông báo không có quyền truy cập;
  :Đóng popup;
  :Chuyển hướng đến trang chính;
endif
stop
@enduml
